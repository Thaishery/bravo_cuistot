 {# ? Feuille : Gestion des recettes #ModeAdmin #} 

 {% extends 'base.html.twig' %}
 
     {% block metaTitle %}
         " Gestion des recettes "
     {% endblock %}

     {% block title %}
         Gestion des recettes
     {% endblock %}
     
     {% block body %}

         <main class="Form">  

             <div class="text-center">

                 {# *********************************************** #}

                 <section>
    
                     <h1> Gestion des recettes </h1>
         
                         <hr/>

                             <p> 
                                 <em> Consulter la liste des recettes de votre site et les administr√©s. </em>  üìì
                             </p>

                         <hr/>

                 </section>

                 {# ? Partie: Barre de recherche User #}

                 <h6> <kbd> Barre de recherche par filtre en cours d'int√©gration: Work In Progress ‚ö†Ô∏è </kbd> </h6>
                 <input type="text" id="myInput" onkeyup="myFunction()" placeholder="Entrer un mot cl√© pour effectuer une recherche rapide...">

                     <article>
     
                         <table id="myTable" class="table table-dark table-hover">

                             <thead>

                             {# ! todo: La fonction " Barre de recherche ne fonctionne pas encore. #}
                             {# ! Je voudrais int√©grer une barre de recherche > qui appplique un filtre sur nos champs #}
                             {# !  Table filtre > Source: https://www.w3schools.com/howto/howto_js_filter_table.asp #}

                             <script>

                                 function myFunction() {

                                     // Declare variables
                                     var input, filter, table, tr, th, i, txtValue;
                                     input = document.getElementById("myInput");
                                     filter = input.value.toUpperCase();
                                     table = document.getElementById("myTable");
                                     tr = table.getElementsByTagName("tr");
                                 
                                     // Loop through all table rows, and hide those who don't match the search query
                                     for (i = 0; i < tr.length; i++) {

                                         th = tr[i].getElementsByTagName("th")[0];

                                         if (th) {

                                             txtValue = th.textContent || th.innerText;

                                             if (txtValue.toUpperCase().indexOf(filter) > -1) {
                                                 tr[i].style.display = "";
                                             } 
                                             
                                             else {
                                                 tr[i].style.display = "none";
                                             }

                                         }

                                     }


                                 }

                             </script>    

                                 <tr class="header">
                                     <th> Id </th>
                                     <th> Nom </th>
                                     <th> Image </th>
                                     <th> Temps de pr√©paration </th>
                                     <th> Temps de cuisson </th>
                                     <th> Nombre de personnes </th>
                                     <th> Difficult√© </th>
                                     <th> Actions </th>
                                 </tr>

                             </thead>

                             <tbody>

                                 {% for recette in recettes %}
                                 
                                     <tr>
                                         <td> {{ recette.id }} </td>
                                         <td> {{ recette.name }} </td>
                                         <td> {{ recette.image ? 'oui' : 'non' }}  </td>
                                         <td> {{ recette.tempsPreparation }} </td>
                                         <td> {{ recette.tempsCuisson }} </td>
                                         <td> {{ recette.nbPersonnes }} </td>
                                         <td> {{ recette.difficulte }} </td>

                                         <td>

                                             <section class="btn-group">
                                             
                                                 <a href="{{ path('administration_recette_show', {'id': recette.id}) }}" type="submit" class="btn btn-success btn-lg col-12">
                                                     Voir
                                                 </a>

                                                 <a href="{{ path('administration_recette_edit', {'id': recette.id}) }}" type="submit" class="btn btn-success btn-lg col-12"> 
                                                     Modifier 
                                                 </a>
                                      
                                             </td>

                                         </td>

                                     </tr>

                                 {% else %}

                                     <tr>
                                         <td colspan="8"> Aucun √©l√©ment ne correspond √† votre recherche </td>
                                     </tr>

                                 {% endfor %}

                             </tbody>

                         </table>
     
                         {# *********************************************** #}

                         <hr/>

                         <section class="btn-group-vertical col-12 ">

                             <a href="{{ path('administration_recette_new') }}" class="btn btn-dark col-12 btn-lg px-4 gap-3"> 
                                 Cr√©er une nouvelle recette
                             </a>
 
                             <a href="{{ path('interface_administration') }}" class="btn btn-success col-12 btn-lg px-4 gap-3">
                                 Retour √† l'interface d'administration
                             </a>    

                         </section>    

                         {# *********************************************** #}

                     </article>

             </div>       

         </main>  

     {% endblock %}
 