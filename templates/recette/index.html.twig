 {# ? Partie : Gestion des recettes #}
 
 {% extends 'base.html.twig' %}
   
     {% block metaTitle %}
         " Liste des recettes "
     {% endblock %}   

     {% block title %}
         Liste des recettes
     {% endblock %}
         
     {% block body %}

         <main class="Form"> 

             {# ! todo: le bouton supprimer recette ne fonctionne pas. a corriger #}

             {# <div class="text-center p-4 p-md-5 mb-4 text-white rounded bg-dark"> #}
             <div class="text-center rounded ">                               
   
                 <div class="col-md-12">

                     {% if is_granted ("ROLE_ADMIN") %}    

                         <section>     
     
                             <h1> Liste des recettes </h1>
                             
                                 <hr/>

                                     <p> 
                                         <em> Consulter et g√©rer vos recettes ! </em> üìá
                                     </p>

                                 <hr/>                
   
                         </section>  
                   
                     {% else %}

                         <section>     
     
                             <h1> Liste des recettes </h1>
                             
                                 <hr/>

                                     <p> 
                                         <em> Consultez notre liste de recettes! </em> üìá
                                     </p>

                                 <hr/>                
   
                         </section> 

                     {% endif %}

                     {# ! todo: Ne marche pas encore. Voir comment on impl√©mente la fonctionnalit√© #}
                 
                     {# ? Partie: Barre de recherche #}
       
                     <form> 

                         <h6> <kbd> Barre de recherche en cours d'int√©gration: Work In Progress ‚ö†Ô∏è </kbd> </h6>
                         {# <input type="text" id="myInput" onkeyup="myFunction()" placeholder="Entrer un mot cl√© pour effectuer une recherche rapide..."> #}

                         <input class="form-control border-dark text-center"
                                 type="text" 
                                 placeholder="Entrer un mot cl√© ou le nom d'une recette (Exemple: Salade, Pate, Tiramisu, Mojito, etc...)"
                                 aria-label="Search">

                         {# ! todo: La fonction " Barre de recherche ne fonctionne pas encore. #}
                         {# ! Je voudrais int√©grer une barre de recherche > qui appplique un filtre sur nos champs #}
                         {# !  Table filtre > Source: https://www.w3schools.com/howto/howto_js_filter_table.asp #}

                         {# <script>

                             function myFunction() {

                                 // Declare variables
                                 var input, filter, table, tr, th, i, txtValue;
                                 input = document.getElementById("myInput");
                                 filter = input.value.toUpperCase();
                                 table = document.getElementById("myTable");
                                 tr = table.getElementsByTagName("tr");
                             
                                 // Loop through all table rows, and hide those who don't match the search query
                                 for (i = 0; i < tr.length; i++) {

                                     th = tr[i].getElementsByTagName("th")[0];

                                     if (th) {

                                         txtValue = th.textContent || th.innerText;

                                         if (txtValue.toUpperCase().indexOf(filter) > -1) {
                                             tr[i].style.display = "";
                                         } 
                                         
                                         else {
                                             tr[i].style.display = "none";
                                         }

                                     }

                                 }


                             }

                         </script> #}
                    
                     </form>

                     <br/>

                     {# ? Partie: Liste des recettes. #}

                     <article class="flex-container">

                         <div class="p-4 text-white rounded bg-dark">

                             <div class="row">

                                 {% for recette in recettes %}

                                     <div class="col-6 col-sm-3 cardRecette">

                                         <div class="carteBg1 card mb-3">

                                             <article class="card-body">

                                                 {# ? Partie: Titre de la recette #}

                                                 <section>

                                                     <hr class="homeDivider3"/>

                                                         <h2 class="card-title mb-3 rounded"> {{recette.name}} </h2>
                                                         {# <h6 class="card-subtitle mb-2 text-muted"> Card subtitle </h6> #}

                                                     <hr class="homeDivider4"/>   

                                                 </section> 

                                                 {# ? Partie: Image de la recette #}     

                                                 <section> 

                                                     {% if recette.image %}

                                                         <figure>
                                                             <img src="{{asset('uploads/recettes/'~ recette.image)}}" 
                                                                 style="max-width: 20vw; max-height:20vh;"
                                                                 alt="Image de la recette"/>
                                                         </figure>

                                                     {% else  %}
                                                         
                                                         <figure>
                                                             <img id="avatarUser" src="{{asset('Images/JunkFood.jpg')}}" alt="Logo du site" >
                                                         </figure>

                                                     {% endif %}           

                                                 </section>

                                                 {# ? Partie: Note de la recette #}     

                                                 {# <section> 

                                                     <p class="card-text"> Note de la recette </p>

                                                 </section> #}

                                             </article>

                                             {% if is_granted('ROLE_ADMIN') %}

                                                 <section class="btn-group-vertical col-12">

                                                     <a href="{{path("recette_show", {'id': recette.id})}}" type="submit" class="btn btn-success bg-gradient">                                
                                                         Voir üëÄ
                                                     </a>  
                                                
                                                     <a href="{{path("recette_edit", {'id': recette.id})}}" class="btn btn-secondary bg-gradient"> 
                                                         Modifier üîß
                                                     </a>

                                                 </section>   

                                             {% else %}

                                                 <section class="btn col-12">

                                                     <a href="{{path("recette_show", {'id': recette.id})}}" type="submit" class="btn btn-success btn-lg col-12">                                
                                                         Voir la recette üëÄ
                                                     </a>  

                                                 </section>   
                             
                                             {% endif %}

                                         </div>     

                                     </div>        

                                 {% endfor %}

                             </div>

                         </div>

                     </article> 

                     <hr/> 

                 </div>    

             </div>         

         </main>
 
     {% endblock %}

     {# ! todo: il faudrait que l'on donne une taille fixe/ la meme taille √† toutes les images #}

     {# ? Id√©e modification > https://www.w3schools.com/howto/howto_css_image_transparent.asp  #}